DEFAULT GATEWAY (OU PASSERELLE PAR DEFAUT)

	Afin de comprendre le principe de fonctionnement d'un default gateway, commençons par un exemple : dans un terminal, on va exécuter la commande ifconfig sous MacOS et Linux, ou ipconfig sous Windows. En sortie, la console va afficher des informations comme le DNS auquel l'ordinateur est rattaché, l'adresse IPv6 qui lui a été attribuée si elle en possède un, son adresse IPv4 attribuée, le masque de sous-réseau associé et enfin l'adresse IP de la passerelle par défaut. Mais de quoi s'agit-il exactement ? En bref, un default gateway constitue un appareil qui transfère des données d'un réseau à un autre et la majorité du temps, ce sera un routeur. A titre d'exemple, on considère le réseau suivant qui comporte 3 machines reliées à un switch, lui même raccordé à un routeur ; De l'autre côté de celui-ci on trouve internet. Afin que les ordinateurs puissent accéder à un autre réseau, comme récupérer une page web sur internet, les données devront sortir de leur réseau local par le passerelle par défaut, c'est-à-dire le routeur, puis ce dernier transfèrera les données en question sur internet. Le processus fonctionne également dans l'autre sens ; De ce fait, si une machine d'internet souhaiter entrer en communiquer avec un des ordinateurs de notre réseau local, il devra en premier temps passer par le routeur pour enfin atteindre la machine de destination. En résumé, un default gateway est un appareil provenant d'un réseau permettant la communication avec des appareils venant d'autres réseaux. Le routeur va donc constituer une porte d'entrée, ou une passerelle vers tout réseau. Dans la dénomination de passerelle par défaut, le terme "défaut" signifie qu'il s'agit de la première option examinée par l'appareil visé lorsque des données doivent quitter le réseau.
	Si l'on reprend notre exemple précédent, dans le cas où les ordinateurs souhaitent communiquer entre eux, ils pourraient simplement discuter entre-eux à travers le switch qui les relie. La raison pour laquelle cela est possible est que les 3 machines font partie du même réseau local ; De ce fait, leurs données n'ont pas la nécessité de sortir du réseau et de passer par le routeur. Cela nous amène donc à la question suivante : Si les 3 ordinateurs souhaitent communiquer entre-eux, de quelle manière arrivent-t-ils à déterminer s'ils sont sur même réseau ou des réseaux différents? C'est ainsi qu'entrent en jeu les adresses IP et les masques de sous réseau. Comme précisé lors de notions précédentes, une adresse IPv4 est composée de deux parties : la première correspond à l'adresse réseau et la seconde à l'adresse hôte ; Afin de déterminer laquelle des deux correspond à quelle portion de l'adresse IP, il faut se référer au masque de sous-réseau. Pour rappel, un masque de sous-réseau correspond à un nombre ressemblant à structurellement une adresse IP et qui révèle combien de bits de l'adresse IP sont occupés par l'adresse réseau en "masquant" cette portion. De ce fait, dans un réseau qui a pour adresse IP 192.168.0.x, avec pour masque de sous réseau 255.255.255.0, les trois premiers nombres des adresses IP de chaque ordinateur ou appareil de ce même réseau commenceront par 192.168.0. De ce fait, tous les appareils dont les trois premiers octet de l'adresse IP sont 192.168.0 font partie du même réseau et peuvent échanger des données sans passer par l'extérieur. La portion hôte de l'adresse IP correspondra à ce qui est attribué de manière unique à chaque machine.
	
	Pour aller plus loin dans la compréhension de la notion de passerelle par défaut, on considère le réseau privé suivant divisé en deux sous réseaux, ou subnets.
		<ILLU RESEAU DECOUPE>
Celui qui se trouve sur la gauche se trouve sur le réseau 192.168.0 et celui de droite sur le 192.168.1 et chacun des deux sous-réseaux possède son propre default gateway. Considérons désormais qu'un ordinateur A du réseau 192.168.0 souhaite communiquer avec un ordinateur B sur le même réseau ; De ce fait, l'ordinateur A va en premier temps vérifier que l'adresse IP du B commence bien par 192.168.0 pour savoir s'il est bel et bien sur le même réseau. Etant donné que la portion réseau des adresses IP des deux machines est identique, on peut bien en déduire que c'est le cas. Dès lors, afin que la communication puisse avoir lieu, l'ordinateur A a désormais besoin de l'adresse MAC de l'ordinateur B. Pour ce faire, il diffuse en broadcast une requête ARP sur le réseau afin qu'il puisse lui fournir son adresse MAC ; Une fois cela effectué, les deux machines peuvent communiquer.
	Dans un autre scénario, on considère qu'un ordinateur A du sous-réseau 192.168.0 souhaite communiquer avec un ordinateur D su sous-réseau 192.168.1. Une nouvelle fois, l'ordinateur A va vérifier en premier temps l'adresse IP de l'ordinateur D afin de vérifier s'il se trouve ou non dans son réseau. Comme vous l'imaginez, cette fois-ci les deux appareils sont dans des réseaux différents puisque les trois premiers octets de leur adresse IP ne sont pas identiques : le troisième octet de l'adresse IP de l'ordinateur A est un 0 et celui du D est un 1 ; L'ordinateur A sait désormais que l'ordinateur D se trouve sur un réseau différent, il ne peut donc pas directement communiquer avec lui et doit utiliser la passerelle par défaut. Pour ce faire, l'ordinateur A va diffuser une requête ARP pour demander cette fois-ci l'adresse MAC du default gateway et non de l'ordinateur D. En effet, celui-ci se trouvant sur un autre réseau, il ne recevra pas le broadcast étant donné qu'il ne va pas au delà du routeur en deçà duquel la diffusion est effectuée. Une fois que l'ordinateur A connait l'adresse MAC du routeur, il va lui envoyer les données à destination de l'ordinateur D puis sera transféré vers le routeur du réseau de celui-ci, et enfin arriver au niveau du destinataire.