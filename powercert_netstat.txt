FONCTIONNEMENT DE LA COMMANDE NETSTAT

	Netstat est la compression des termes Network Statistics, ou statiques réseau, et correspond à une ligne de commande utilisée pour afficher les connexions réseau et l'activité des ports en cours sur un ordinateur. Il s'agit d'un bon outil pour s'informer de quel service est en train de tourner sur une machine, et quels ports sont ouverts. La commande netstat est disponible sur divers systèmes d'exploitation, mais certaines options de la commande peuvent diverger en fonction de ceux-ci. Dans les exemples qui suivront, les commandes seront celles compatibles avec Windows.
	Dans un premier cas de figure, si l'on se place dans un terminal et que l'on exécute la commande netstat, l'output de la commande est vide, étant donné que l'ordinateur n'est connecté à rien. En revanche, si notre machine était connectée à d'autres hôtes, alors l'output de l'exécution de netstat nous indiquerait le protocole utilisé, l'adresse locale, l'adresse étrangère et l'état de la connexion.
	Désormais, essayons de connecter notre ordinateur à un petit groupe de sites web comme google.com et exemple.com ; Et faisons de même en se connectant à un serveur FTP et à quelques machines présentes en local dans notre habitation. Dans cette configuration, si l'on exécute la commande netstat, on peut observer les informations suivantes : le protocole utilisé est le TCP, on peut lire également l'adresse IP locale de notre ordinateur qui sont accompagnées des numéros de ports utilisés pour cette connexion particulière. Au niveau de la troisième colonne, on retrouve les adresses IP des connexions vers google.com et celle vers exemple.com, ainsi que le protocole utilisé pour chaque site, en l'occurence https. On peut également apercevoir le site FTP auquel notre machine est connectée, et enfin les deux ordinateurs présent dans notre foyer.

	La commande netstat peut être associée à d'autres sous-commandes ou switches pour modifier ce que l'output indiquera. A titre d'exemple, si l'on exécute la commande netstat -n, la console nous fera apparaitre en sortie la même chose en sortie que l'exécution de netstat, seulement elle n'affichera que les nombres et pas les noms. Si l'on met les deux sorties respectives à chaque commande côté à côté, vous pouvez constater les différences suivantes :
		<CONSOLE NETSTAT ET CONSOLE NETSTAT -N>
Si vous exécutez la commande sur votre ordinateur, vous constaterez dans le cas de l'exécution de netstat que l'output n'est pas instantanée ; Elle est lente et les résultats apparaissent ligne par ligne. La raison pour laquelle cela se produit vient de l'utilisation du DNS afin de résoudre les nombres en noms. Comme vous pouvez le constater, la console affiche les noms des ordinateurs auquel le notre est connecté, accompagné des noms de protocoles. En revanche, si l'on exécute désormais la commande accompagnée du switch netstat -n, l'output sera instantannée. Cela s'explique simplement par le fait que l'ordinateur n'a pas besoin de consulter le serveur DNS pour convertir les adresses IP en nombres, étant donné que la commande ne demande d'afficher que les nombres. Contrairement à la fenêtre d'exécution de netstat, on constate que les noms de protocoles et des appareils sont remplacés par les numéros de ports associés et les noms des machines du réseau local sont remplacées par leur adresse IP privée.

	Un autre switch que l'on peut citer concernant la commande netstat est le -a, dans la commande netstat -a. Celle-ci va nous donner en sortie un peu plus d'informations que les commandes précédentes puisqu'en plus d'afficher les connexions en cours, elle nous indique lesquels des ports TCP ou UDP sont à l'écoute pour une connexion. La première partie de l'output va être dédiée aux ports TCP et juste après celle-ci, on trouve jusqu'à la fin la liste de tous les ports UDP. Les adresses IP que l'on peut observer au tout début et qui de sont composées que de 0 désignent notre propre ordinateur. La raison pour laquelle il ne s'agit que de 0 est parce que cela signifie que le port n'écoute pas une adresse spécifique mais à toutes les adresses IP disponibles sur l'ensemble de l'interface réseau. Etant donné que l'adresse IP locale est composée essentiellement de 0 l'autre extrémité de la connexion est la machine elle-même. C'est la raison pour laquelle on peut remarquer le nom de notre ordinateur, en l'occurence "MONPC". Au niveau	de la dernière colonne se trouvent les ports ouverts sur notre machine et qui sont soit marqués comme "listening" pour indiquer qu'ils sont à l'écoute d'une connexion, ou bien si elles ont déjà été établies, elles sont notées comme "established". Au niveau de la partie dédiée au TCL, les IPv4 sont listées en premier dans la partie du haut, et les IPv6 le sont dans la partie du bas.

	Dans le cas où vous souhaitez savoir quel programme est actuellement utilisé pour les connexions listées précédemment, vous pouvez utiliser la commande netstat -b. Si l'on s'intéresse aux informations proposées en output par la console, on remarque que les deux connexions aux sites web sont faites par le biais de google chrome et indiquées par chrom.exe. De son côté, la connexion FTP est établie grâce à filezilla, doit une application FTP très répandue.
	Parmi les autres sous-commandes de netstat que l'on peut citer, on trouve également le netstat -f, qui permet de présenter le nom complet de domaine (Fully Qualified Domain Names) des adresses auxquelles nous somme connectées. En se penchant sur les résultats de l'exécution de la commande, on peut voir précisément les sites google et exemple, ainsi que le serveur FTP auquel notre ordinateur est connecté.

	Vous n'avez toutefois pas besoin d'utiliser les switches indépendamment puisque vous disposez de la possibilité de les combiner afin de récupérer l'output que vous désirez. A titre d'exemple, on pourrait complètement fusionner les deux derniers switches cités en exécutant la commande netstat -bf : on peut désormais accéder dans l'output aux données qui concernent le switch b, c'est à dire les exécutables et également les noms de domaine complets proposé par le switch f. Pour un deuxième exemple, nous pouvons exécuter la commande netstat -an, c'est à dire une combinaison des switches a et n. Nous pourrons voir en sortie les connexions actives en court avec quels ports sont à l'état d'écoute pour une connexion qui concernent le switch a, mais également l'output du switch n étant donné que les noms n'apparaissent pas et que l'on trouve seulement des numéros.

	Une manière de se mettre au courant de tous les switches disponibles pour la commande netstat est en exécutant dans un terminal la commande netstat /?.