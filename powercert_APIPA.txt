QU'EST CE QUE L'APIPA?

	Tout ordinateur nécessite une adresse IP pour communiquer sur un réseau et lorsqu'une machine est configurée pour obtenir automatiquement une adresse IP, elle la reçoit de la part d'un serveur DHCP. Mais que se passe-t-il si un ordinateur ne parvient pas à atteindre le serveur? Par exemple, que se passerait-il si un serveur DHCP venait à s'éteindre ou si la communication avec le serveur était perdue? Sur une machine sous Windows, celle-ci va s'attribuer elle-même sa propre adresse IP appartenant à une plage de valeur entre 169.254.0.1 et 169.254.255.254 ; Ce procédé est spécifiquement ce que l'on appelle l'APIPA, dont l'acronyme correspond à Automatic Private IP Addressing. Ces mêmes machines font également automatiquement s'attribuer un masque de sous-réseau de 16 bits. La raison pour laquelle il est possible qu'un ordinateur s'attribue lui même sa propre adresse IP est que, même sans DHCP pour lui en fournir une, il sera toujours en mesure de communiquer avec d'autres ordinateurs sur le même réseau local, ou plus spécifiquement le même sous-réseau. Toutefois, il ne pourra pas accéder à internet ou communiquer avec une machine d'un autre réseau avec ce type d'adresses IP. Ainsi, si vous êtes sur un ordinateur et que vous suspectez qu'il y ait un problème réseau, et que vous ne pouvez pas accéder à internet, vous pouvez ouvrir un terminal et exécuter la commande ipconfig sous windows, ou ifconfig sous Linux ou MacOS, pour vérifier sa configuration. L'output de l'exécution précisera dans le cas d'une attribution automatique, que l'adresse IPv4 est une auto-configuration. Et si un ordinateur s'est automatiquement attribué une adresse lui-même, cela pourra s'observer dans le fait que l'adresse fasse partie de la plage de valeurs précisée précédemment.
	Pour comprendre la démarche à suivre dans ce cas de figure, prenons l'exemple suivante : dans un bureau on compte 3 ordinateurs et ils sont tous les trois connectés à un switch, lui même connecté à un serveur DHCP. On considère que le serveur DHCP ne peut pas etre atteint, que ce soit à cause d'un dysfonctionnement, d'un câble déconnecté ou d'une panne directement au niveau du serveur admettons. Lorsque l'on va allumer les ordinateurs du bureau, ils vont envoyer une requête au DHCP pour que celui-ci leur attribue une adresse IP. Comme celui-ci ne peut pas etre contacté, étant donné qu'il est en panne, les machines vont s'auto-attribuer leurs propres adresses IP dans la plage d'adresse disponible allant de 169.254.0.1 à 169.254.255.254. A partir de là, étant donné que deux ordinateurs ne peuvent pas se voir attribuer la même adresse IP sans compromettre l'envoi et la réception d'information réseau, il faut s'assurer que chaque ordinateur prenne une adresse IP unique. Pour ce faire, chacun d'entre deux va envoyer en Broadcast un message ARP pour vérifier auprès des autres appareils que personne d'autre n'utilise l'adresse IP qu'il s'apprête à utiliser. A partir du moment où chaque ordinateur a pu s'auto-attribuer son adresse IP, ils seront en mesure de communiquer entre eux sous le même sous-réseau. 
	Toutefois, chaque machine va régulièrement vérifier si la communication avec le serveur DHCP n'a pas été rétablie. Si c'est le cas et qu'un ordinateur détecte de nouveau un serveur DHCP, il va remplacer l'adresse IP auto-attribuée par celle obtenue par le serveur.