QU'EST CE QUE LE TRACEROUTE?

	Le traceroute est une ligne de commande utilisé pour afficher la route que des paquets de données empruntent lorsqu'ils traversent internet pour atteindre leur destination. On pourrait définir internet par un réseau global de routeurs qui permettent à des ordinateurs et des serveurs de communiquer entre-eux depuis l'ensemble du globe. Ces routeurs communiquent ensemble afin de rédiger ou router des paquets de données à leur destination prévue. Le traceroute constitue simplement un outil dont on se sert pour connaitre le parcours exact que doit emprunter un paquet de donnée de son expéditeur à son destinataire. Ainsi, vous pouvez vous servir de traceroute afin de vous aider à résoudre des problèmes comme les embouteillages (bottlenecks), en essayant d'en savoir plus sur pourquoi et à quel endroit une connexion à un serveur pourrait lagger. Il est également tout à fait possible de s'en servir par curiosité, pour en savoir plus sur le parcours que des données empruntent jusqu'à leur destination.
	La commande traceroute est un peu différente de la commande ping puisque lorsqu'on ping un serveur, comme google.com, l'ordinateur depuis lequel vous exécutez la commande va envoyer des paquets de données et une fois reçues par le destinataire, ils vont être renvoyés de là où ils viennent. De ce fait, si vous recevez tous les paquets, ou bien une partie, en retour, alors cela signifie que que la connectivité est bien généralisée entre votre machine et la machine de destination. Additionnellement, la commande ping informera l'utilisateur du temps, mesuré en ms, que les données auront pris pour voyager d'un point à un autre. Toutefois, la commande traceroute donnera plus d'informations. En effet, elle ne réalise pas seulement un ping de la destination finale, mais ping également les routeurs qui se trouvent sur le parcours en direction de la destination. De plus, elle mesure la durée de trajet aller-retour que le paquet de donnée aura mis entre chaque routeur et le destinataire. 
	Pour illustrer cette notion, essayons de tracer le parcours de notre ordinateur jusqu'à un serveur sur internet. Pour cela, il suffit d'ouvrir une fenêtre de terminal, et d'exécuter la commande traceroute suivie de l'IP de destination ou bien le nom l'hôte sous Linux et MacOS, ou tracert <ip> ou tracert <host_name> sous Windows. A partir de là, notre ordinateur va envoyer 3 paquets de données à chaque routeur sur le parcours vers sa destination. A chaque fois qu'un paquet va atteindre un routeur de son chemin, le routeur va le renvoyer à notre machine en nous révélant des informations concernant le routeur en question, comme son adresse IP. Il va également nous informer du temps de trajet mesuré en ms que les trois paquets ont mis depuis et vers chaque routeur. 
	Une fois les résultats obtenus, nous pouvons nous pencher dessus : sous Linux, la première colonne nous indique le nombre de sauts ou étapes par lesquelles les paquets ont pris pour atteindre leur destination - en l'occurrence 11 ici. La colonne suivante précise la durée de trajet de chaque paquet entre un routeur et son retour à la machine expéditrice. A la première étape, les paquets ont seulement pris 2,7ms, on peut donc en déduire que le trajet était très court. C'est justifié par le fait qu'il s'agit du routeur ou modem de notre propre réseau local. Toutefois, comme vous pouvez le constater, à partir du moment où les données sortent sur internet, les durées de trajet sont bien supérieures. Au plus loin les paquets de données seront envoyés et seront traverser chaque routeur, le plus long sera le trajet. La durée de trajet vers l'étape finale correspond grossièrement à la durée de si nous avions exécuté une commande ping, soit 15ms. La similitude entre les résultats d'exécution des deux commandes réside simplement dans le fait que le ping n'affiche que la temps que les paquets ont mis pour atteindre la destination finale. La dernière colonne liste les adresses IP de chaque routeur, ou leur nom de domaine s'il est disponible, et de la dernière machine atteinte. Pour revenir aux durées de trajet, l'une des informations les plus importantes à consulter lorsqu'on exécute traceroute est la constance des temporalités des étapes. Comme vous pouvez le constater, les durées de trajets de cet exemple sont valeurs normales puisqu'elles sont du même ordre sans observer d'augmentation entre chaque saut.
	En revanche, on pourrait imaginer un autre scénario dans lequel le site google.vcom est très lent. Ainsi, nous allons en premier temps exécuter la commande ping pour observer ce qu'il en ressort ; Cette fois-ci, la durée de trajet est drastiquement différente et se trouve aux alentours des 200 ms. Cela pourrait indiquer un problème puisqu'il est rare que cette temporalité soit aussi élevée. Toutefois, en exécutant un ping, la commande peut nous prévenir qu'il y a un problème mais ne peut pas nous dire où se il se trouve. Dans ce cas de figure, le traceroute peut entrer en scène puisqu'il peut mettre le doigt sur le problème que le ping n'a pas pu mettre en lumière. Si désormais on exécute la commande traceroute google.com, et que l'on consulte l'output, on peut observer que le problème vient d'internet, et plus spécifiquement du 5è saut. Bien que l'incident se produit à ce niveau, le reste de la route va tout de même être impactée. Ainsi, nous avons bien mis le doigt sur le fait que la connections lente ou le lag n'avait pas pour origine notre réseau local ni du serveur de destination, mais un ou plusieurs routeurs sur internet.

	S'il arrive parfois de constater une durée de trajet importante en output d'une exécution de commande traceroute, cela n'indique pas pour autant nécessairement un problème ; Cela pourrait seulement être lié à la distance entre deux routeurs qui peut etre de plusieurs milliers de kilomètres et qu'un paquet de données doit par exemple traverser un continent entier.
	Dans d'autres cas, vous pourriez remarquer des astérisques à la place de nombres au niveau des durées de trajet pour un routeur spécifique. Cela pourrait aussi bien indiquer un problème au niveau de celui-ci, ou bien que le routeur fonctionne correctement qu'il n'est pas configuré pour retourner des réponses de types traceroute ; Pour autant, il continuera de laisser passer les paquets des données au routeur suivant.
	Comme précisé précédemment, le traceroute envoie 3 paquets de donnée à chaque routeur qui se trouve sur le parcours vers une destination. Vous pourriez alors voir des disparités entre les durées de transfert de chacun des 3 paquets au niveau du même saut. Pour autant, il n'y a pas de quoi s'inquiéter, puisque cela peut simplement témoigner du fait qu'il se soit produit quelque chose d'étrange à ce paquets. Ainsi, une des raisons pour laquelle 3 paquets sont envoyés, et pas seulement un ou deux, réside dans le fait que cela permet d'éliminer des "faux" problèmes qui sont simplement des résultants de bugs.

	On peut associer un autre valeur au traceroute appelée le TTL, ou Time To Live, qui correspond à une valeur donnée à des paquets de données sur la durée de leur existence avant qu'ils soient jetés. Par exemple, si l'on exécute une nouvelle fois traceroute, on va pouvoir apercevoir l'indication "over a maximum of 30 hops" ; Cela signifie alors que le TTL a été configuré sur 30 hops, soit la valeur par défaut. Ainsi, dans le cas où les paquets de données n'atteindrait pas leur destination après 30 sauts, ils sont abandonnés. 
	Dans un quatrième exemple, on peut configurer le TTL pour une valeur personnalisée comme 4. Pour ce faire, il suffit d'exécuter dans un terminal la commande suivante traceroute -h 4 google.com sous Linux ou MacOS, ou bien tracert -h 4 google.com sous Windows. Dès lors, à partir du moment où les données vont réaliser leur 4è saut, les paquets seront abandonnés et le transfert ne se poursuivra pas.
	Quel est donc l'intérêt de disposer d'un TTL en premier lieu? En premier lieu cela va permettre de prévenir des paquets de données de voyager indéfiniment sur internet en essayant de trouver son destinataire final. En effet, cela peut arriver pour certains routeurs sur internet ayant été mal configurés. De ce fait, si les TTL ne présentaient aucune limite puis que l'on essayait d'exécuter une nouvelle fois un traceroute, et que certains routeurs sur internet ont été mal paramétrés, des paquets de données pourraient être coincés dans une boucle infinie entre les routeurs en question. Ces cas de figure auraient pour conséquence de ralentir internet, étant donné que les routeurs sont occupés à gérer les données bloquées dans la boucle. Ainsi, une limite de temps est mise en place pour prévenir ces inconvénients de se produire et de limiter le gaspillage de bande passante.

	En conclusion, un traceroute peut être exécuté sur